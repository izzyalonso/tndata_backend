{% extends "goals/base.html" %}
{% load goal_tags %}
{% load goal_filters %}
{% load util_tags %}
{% load util_filters %}

{% block content %}
  <ul class="breadcrumbs">
    <li><a href="{% url 'goals:index' %}">Home</a></li>
    <li><a href="{% url 'goals:goal-list' %}">Goals</a></li>
    <li class="current">{{ goal }}</li>
  </ul>

  <div class="row">
    <div class="large-6 small-12 columns">
      <h1>{{ goal }} {% object_controls goal "goals" %}</h1>
      <dl>
      <dt>State</dt><dd>{{ goal.state|label }}</dd>
      <dt>Icon</dt><dd>
        {% if goal.icon %}
          <a href="{{ goal.icon.url }}" target="_blank">
          <img src="{{ goal.icon.url }}" alt="{{ goal }} icon" />
          </a>
        {% else %}
          <em>No icon available</em>
        {% endif %}
      </dd>
      <dt>Title</dt><dd>{{ goal.title }}</dd>
      <dt>Description</dt><dd>{{ goal.description|markdown }}</dt>
      <dt>Outcome</dt><dd>{{ goal.outcome|markdown }}</dt>
      </dl>
      {% modified goal %}
      {% if perms.goals.publish_goal %}{% publish_deny_form goal %}{% endif %}

    </div>
    <div class="large-6 small-12 columns">
      <h2 class="subheader">Categories</h2>
      <p><em>{{goal}}</em> is listed in the following Categories:</p>
      <ul>
      {% for cat in goal.categories.all %}
        <li>{{ cat }}</li>
      {% endfor %}
      </ul>

      <h2 class="subheader">Behavior Content</h2>
      <p><em>{{goal }}</em> contains the following sequences and actions:</p>
      <ul>
      {% for bs in goal.behavior_set.all %}
        <li>{{bs}}
          <ul>
            {% for ba in bs.action_set.all %}
              <li>{{ ba }}</li>
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
      </ul>

    </div>
  </div> {# end .row #}
{% endblock %}
