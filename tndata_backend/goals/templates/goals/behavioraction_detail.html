{% extends "goals/base.html" %}
{% load util_tags %}
{% load util_filters %}

{% block content %}
  <ul class="breadcrumbs">
    <li><a href="{% url 'goals:index' %}">Home</a></li>
    <li><a href="{% url 'goals:behavioraction-list' %}">Behavior Actions</a></li>
    <li class="current">{{ behavioraction }}</li>
  </ul>

  <div class="row">
    <div class="large-6 small-12 columns">
      <h1>{{ behavioraction }} {% object_controls behavioraction %}</h1>
      <dl>
        <dt>Sequence Order</dt><dd>{{ behavioraction.sequence_order }}</dd>
        <dt>Title</dt><dd>{{ behavioraction.title }}</dd>
        <dt>Source Link</dt><dd>{{ behavioraction.source_link}}</dd>
        <dt>Source Notes</dt><dd>{{ behavioraction.source_notes|markdown }}</dd>
        <dt>Notes</dt><dd>{{ behavioraction.description|markdown }}</dd>

        <dt>Narrative Block</dt><dd>{{ behavioraction.narrative_block|markdown }}</dd>
        <dt>Description</dt><dd>{{ behavioraction.description|markdown }}</dd>
        <dt>Outcome</dt><dd>{{ behavioraction.outcome|markdown }}</dd>
        <dt>Default Trigger</dt>
          {% with trigger=behavioraction.default_trigger %}
          <dd>
            {% if trigger %}
              {{ trigger }}: {{ trigger.get_frequency_display }}
              {% if trigger.trigger_type == "time" %}
                {{ trigger.time }}
              {% else %}
                {{ trigger.location }}
              {% endif %}
              <br/>{{ trigger.text }}<br/>{{ trigger.instruction }}
            {% else %}
              <em>No trigger defined.</em>
            {% endif %}
          </dd>
          {% endwith %}
        <dt>Notification Text</dt><dd>{{ behavioraction.notification_text }}</dd>
        <dt>Icon</dt><dd>
          {% if behavioraction.icon %}
            <img src="{{ behavioraction.icon.url }}" alt="{{ behavioraction }} icon" />
          {% else %}
            <em>No icon available</em>
          {% endif %}
        </dd>
        <dt>Image</dt><dd>
          {% if behavioraction.image %}
            <img src="{{ behavioraction.image.url }}" alt="{{ behavioraction }} image" />
          {% else %}
            <em>No image available</em>
          {% endif %}
        </dd>
      </dl>
    </div>
    <div class="large-6 small-12 columns">
      <h2 class="subheader">Behavior Sequence</h2>
      <p>This Action is part of the following Behavior Sequence:</p>
      {% with seq=behavioraction.sequence %}
      <table>
        <caption>{{ seq }}</caption>
        <tbody>
        <tr><th>Sequence Order</th><td>{{ behavioraction.sequence_order }}</td></tr>
        <tr><th>Informal List</th><td>{{ seq.informal_list|markdown }}</td></tr>
        <tr><th>Categories</th><td>{{ seq.categories.all|join:", " }}</td></tr>
        <tr><th>Goals</th><td>{{ seq.goals.all|join:", " }}</td></tr>
      </table>
      {% endwith %}
    </div>
  </div>
{% endblock %}
